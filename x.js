"use strict";function is_numeric(e){return e=e.trim(),/^[\d\,\.]+$/.test(e)}function inspect_number(e){var t=/.*?([\d\,\.]+)/gi,a=t.exec(e);return a?1==a.length?a[0].trim():a.length>=2?a[1].trim():e:e}function regex_amazon_image(e){return e?e.replace(/\._(.*?)_\.jpg/g,".jpg"):""}function selectElementContents(e){var t,a,r=document.body;if(r.createTextRange)t=r.createTextRange(),t.moveToElementText(e),t.select(),t.execCommand("copy");else if(document.createRange&&window.getSelection){t=document.createRange(),a=window.getSelection(),a.removeAllRanges();try{t.selectNodeContents(e),a.addRange(t)}catch(n){t.selectNode(e),a.addRange(t)}try{document.execCommand("copy")}catch(n){console.log(n)}}}function copyToClipboard(e){var t=document.createElement("table"),a=t.insertRow(0),r=!0,n=!1,i=void 0;try{for(var o,s=e.entries()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=_slicedToArray(o.value,2),l=c[0],p=c[1];a.insertCell(l).innerHTML=p}}catch(d){n=!0,i=d}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw i}}var m=document.body.appendChild(t);selectElementContents(m),document.execCommand("copy",!0),document.body.removeChild(m)}function priceFormat(e){var t=/(?:.*?)([0-9\.\,]+)(?:.*?)/gi.exec(e);return t&&t.length>0&&(e=t[0]),e&&e.indexOf("$")==-1&&/[\d]/gi.test(e)?"$"+e:e}function serveWithGGScript(){chrome.storage.sync.get("user_type",function(e){var t="fba";t=e&&e.user_type?e.user_type&&"string"==typeof e.user_type&&e.user_type.toLowerCase()||"fba":"fba";var a={},r=($("#aic-ext-input-fba-buy-cost"),{}),n=$("#productTitle").text()&&$("#productTitle").text().trim(),i=$("#imageBlock_feature_div li.item span > img").attr("src")||$(".a-dynamic-image").attr("src")||$("#landingImage").attr("src")||"";if(i.startsWith("http")||(i=$("#landingImage").data("old-hires")||""),!i.startsWith("http")){var o=$("#landingImage").data("a-dynamic-image"),s=Object.keys(o);s=s&&s[0],s&&(i=s.replace(/\._(.*?)_\.jpg/gi,".jpg"))}i=regex_amazon_image(i),a.title=n,a.image=i;var c=$("#averageCustomerReviews").data("asin"),l=priceFormat($("#aic-ext-input-"+t+"-buy-cost").val()||""),p=priceFormat($("#aic-ext-input-"+t+"-sell").val()||$('span[id*="ourprice"]').text()||$('span[id*="sellprice"]').text()||"No BBPrice"),d=priceFormat($("#aic-ext-"+t+"-result").text()||""),m=$("#aic-ext-"+t+"-roi").text(),y=$("#aic-ext-"+t+"-profit").text(),u=$(".aic-ext-body > .aic-ext-rank-container > .aic-ext-keepa-line > .aic-ext-keepa-value").last().text();a.asin=c,a.buyprice=l,a.sellprice=p,a.netprofit=d,a.roi=m,a.margin=y,a.rank_90=u;var g=$(".aic-ext-body > .aic-ext-rank-container > .aic-ext-rank-line").text();if(!g){var f=$("tr > th"),h=!0,x=!1,v=void 0;try{for(var b,_=f[Symbol.iterator]();!(h=(b=_.next()).done);h=!0){var k=b.value;if($(k).text().indexOf("Best Sellers Rank")>=0){var w=$(k).next().find("span > span");g=$(w&&w[0]).text(),g=g.replace(/(?:\(.*?\)|\#)/g,"");break}}}catch(S){x=!0,v=S}finally{try{!h&&_["return"]&&_["return"]()}finally{if(x)throw v}}if(!g){var R=$("li#SalesRank").text()||$("tr#SalesRank").text();if(R){var I=R.split("(");I.length>0&&(g=I[0])}}}var z=g&&g.split(" in "),A=z&&z.length>0&&z[0].trim();A=inspect_number(A)||"N/A";var T=z&&z.length>1&&z[1].trim()||"N/A",C=$("#aic-ext-offers-mfn").text();C=is_numeric(C)&&parseInt(C)||C;var N=$("#aic-ext-offers-fba").text();N=is_numeric(N)&&parseInt(N)||N;var O=+C+ +N;O=O&&O+"("+N+")"||"";var B="https://dyn.keepa.com/pricehistory.png?domain=com&asin="+c+"&salesrank=1&range=90&width=700&height=265",j=(new Date).toISOString().slice(0,10);a.rank=A,a.category=T,a.totalsellers=O,a.keepaimg=B,a.date=j;var F="";try{F=$("#brand").text()+" "+n+" "+$("#productDescription").text()+" "+$("#detail-bullets").text()+" "+$("#detailBullets").text()}catch(G){F=$("#brand").text()+" "+n}a.brandRanges=F,r.productTitle='<p style="'+normal_style+'">'+n+"</p>",r.productImage='=IMAGE("'+i+'")',r.productASIN='<p style="'+normal_style+'">'+c+"</p>",r.productURL='<a href="https://amzn.com/'+c+'" style="'+normal_style+'">https://amzn.com/'+c+"</a>",r.productASINURL='<a href="https://amzn.com/'+c+'" style="'+normal_style+'">'+c+"</a>",r.productBuyPrice='<p style="'+normal_style+'">'+l+"</p>",r.productSellPrice='<p style="'+normal_style+'">'+p+"</p>",r.productNetProfit='<p style="'+normal_style+'">'+d+"</p>",r.productROI='<p style="'+normal_style+'">'+m+"</p>",r.productMargin='<p style="'+normal_style+'">'+y+"</p>",r.product90Rank='<p style="'+normal_style+'">'+u+"</p>",r.productRank='<p style="'+normal_style+'">'+A+"</p>",r.productCategory='<p style="'+normal_style+'">'+T+"</p>",r.totalOffers='<p style="'+normal_style+'">'+O+"</p>",r.keepaImage='=IMAGE("'+B+'")',r.date='<p style="'+normal_style+'">'+j+"</p>",chrome.runtime.sendMessage({message:"check-restrict-brand",checkingData:a},function(e){e&&(r.productBrand='<p style="'+normal_style+'">'+(e.amazonObject&&e.amazonObject.productBrand||"")+"</p>"),copyData(r)})})}function serveWithoutGGScript(){chrome.storage.sync.get("user_type",function(e){var t="fba";t=e&&e.user_type?e.user_type&&"string"==typeof e.user_type&&e.user_type.toLowerCase()||"fba":"fba";var a={},r=($("#aic-ext-input-fba-buy-cost"),{}),n=$("#productTitle").text()&&$("#productTitle").text().trim(),i=$("#imageBlock_feature_div span > img").attr("src")||$("#detailImg").attr("src")||$("#landingImage").attr("src")||"";if(i.startsWith("http")||(i=$("#landingImage").data("old-hires")||""),!i.startsWith("http")){var o=$("#landingImage").data("a-dynamic-image"),s=Object.keys(o);s=s&&s[0],s&&(i=s.replace(/\._(.*?)_\.jpg/gi,".jpg"))}i=regex_amazon_image(i),a.title=n,a.image=i;var c=$("#averageCustomerReviews").data("asin"),l=priceFormat($("#aic-ext-input-"+t+"-buy-cost").val()||""),p=priceFormat($("#aic-ext-input-"+t+"-sell").val()||$('span[id*="ourprice"]').text()||$('span[id*="sellprice"]').text()||"No BBPrice"),d=priceFormat($("#aic-ext-"+t+"-result").text()||""),m=$("#aic-ext-"+t+"-roi").text(),y=$("#aic-ext-"+t+"-profit").text(),u=$(".aic-ext-body > .aic-ext-rank-container > .aic-ext-keepa-line > .aic-ext-keepa-value").last().text();a.asin=c,a.buyprice=l,a.sellprice=p,a.netprofit=d,a.roi=m,a.margin=y,a.rank_90=u;var g=$(".aic-ext-body > .aic-ext-rank-container > .aic-ext-rank-line").text();if(!g){var f=$("tr > th"),h=!0,x=!1,v=void 0;try{for(var b,_=f[Symbol.iterator]();!(h=(b=_.next()).done);h=!0){var k=b.value;if($(k).text().indexOf("Best Sellers Rank")>=0){var w=$(k).next().find("span > span");g=$(w&&w[0]).text(),g=g.replace(/(?:\(.*?\)|\#)/g,"");break}}}catch(S){x=!0,v=S}finally{try{!h&&_["return"]&&_["return"]()}finally{if(x)throw v}}if(!g){var R=$("li#SalesRank").text();if(R){var I=R.split("(");I.length>0&&(g=I[0])}}}var z=g&&g.split("in"),A=z&&z.length>0&&z[0].trim();A=inspect_number(A)||"N/A";var T=z&&z.length>1&&z[1].trim()||"N/A",C=$("#aic-ext-offers-mfn").text();C=is_numeric(C)&&parseInt(C)||C;var N=$("#aic-ext-offers-fba").text();N=is_numeric(N)&&parseInt(N)||N;var O=C+N;O=O&&O+"("+N+")"||"";var B="https://dyn.keepa.com/pricehistory.png?domain=com&asin="+c+"&salesrank=1&range=90&width=700&height=265",j=(new Date).toISOString().slice(0,10);a.rank=A,a.category=T,a.totalsellers=O,a.keepaimg=B,a.date=j;var F="";try{F=$("#brand").text()+" "+n+" "+$("#productDescription").text()+" "+$("#detail-bullets").text()+" "+$("#detailBullets").text()}catch(G){F=$("#brand").text()+" "+n}a.brandRanges=F,r.productTitle='<p style="'+normal_style+'">'+n+"</p>",r.productImage='<a href="'+i+'">'+i+"</a>",r.productASIN='<p style="'+normal_style+'">'+c+"</p>",r.productURL='<a href="https://amzn.com/'+c+'" style="'+normal_style+'">https://amzn.com/'+c+"</a>",r.productASINURL='<a href="https://amzn.com/'+c+'" style="'+normal_style+'">'+c+"</a>",r.productBuyPrice='<p style="'+normal_style+'">'+l+"</p>",r.productSellPrice='<p style="'+normal_style+'">'+p+"</p>",r.productNetProfit='<p style="'+normal_style+'">'+d+"</p>",r.productROI='<p style="'+normal_style+'">'+m+"</p>",r.productMargin='<p style="'+normal_style+'">'+y+"</p>",r.product90Rank='<p style="'+normal_style+'">'+u+"</p>",r.productRank='<p style="'+normal_style+'">'+A+"</p>",r.productCategory='<p style="'+normal_style+'">'+T+"</p>",r.totalOffers='<p style="'+normal_style+'">'+O+"</p>",r.keepaImage='<a href="'+B+'">'+B+"</a>",r.date='<p style="'+normal_style+'">'+j+"</p>",r.brandRanges=F,chrome.runtime.sendMessage({message:"check-restrict-brand",checkingData:a},function(e){e&&(r.productBrand='<p style="'+normal_style+'">'+(e.amazonObject&&e.amazonObject.productBrand||"")+"</p>"),copyData(r)})})}function copyData(e){chrome.storage.sync.get("activated_sort",function(t){var a=[];t&&t.activated_sort&&(a=t.activated_sort);var r=[],n=!0,i=!1,o=void 0;try{for(var s,c=a[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value;l.value?r.push(""+e[l.value]):r.push(" ")}}catch(p){i=!0,o=p}finally{try{!n&&c["return"]&&c["return"]()}finally{if(i)throw o}}copyToClipboard(r),$.notify("Copied data to clipboard !!!","success")})}var _slicedToArray=function(){function e(e,t){var a=[],r=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(c){n=!0,i=c}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();chrome.storage.sync.get("hideNotification",function(e){console.log(e),e&&e.hideNotification||($.notify.addStyle("notification",{html:"<div>\n<span data-notify-html></span>\n</div>",classes:{base:{"max-width":"350px","font-weight":"bold",padding:"20px","text-shadow":"0 1px 0 rgba(255, 255, 255, 0.5)","background-color":"#fef8ef",border:"2px solid #000","border-radius":"4px","background-repeat":"no-repeat","background-position":"left"}}}),$.notify('\n            <span class=\'close-notification\' style="float: right; margin: -10px -5px; cursor: pointer;">\n                <svg viewPort="0 0 12 12" version="1.1"\n                 xmlns="http://www.w3.org/2000/svg" width="12" height="12">\n                    <line x1="1" y1="11" \n                          x2="11" y2="1" \n                          stroke="black" \n                          stroke-width="2"/>\n                    <line x1="1" y1="1" \n                          x2="11" y2="11" \n                          stroke="black" \n                          stroke-width="2"/>\n                </svg>\n            </span>\n            <h4 style="text-align: center; font-weight: bold; margin-bottom: 20px;">Amazon Quick Copy users!</h4>\n            <p>Our team has developed a new(cheaper!) solution to Automatic Repricing.</p>\n            <p>In short, it turn’s Amazon’s Free repricer into a powerful, useful application.</p>\n            <p>Watch a short demo video <a href="//www.youtube.com/embed/e9iFsEgWs6I?rel=0&amp;vq=hd720" target="_blank">here</a>, and try it for 7 days free <a href="https://amzrepricerenhanced.com" target="_blank">here</a>!</p>\n            <p style="text-align: center;">It’s called "AMZ Repricer Enhanced."</p>\n            <p style="text-align: center;">\n                <a class="waves-effect waves-light btn-large black-text orange lighten-4 btn-rounded btn-hover flex-1" href="https://www.amzrepricerenhanced.com" target="_blank"> <span>TRY IT FREE!</span></a>\n            </p>\n            <p style="text-align: center;"><a href="https://amzrepricerenhanced.com" target="_blank"><img src="https://www.amzrepricerenhanced.com/static/images/brand-logo-small.png" width="80%"/></a></p>\n            <p style="text-align: center;">Thank you!</p>',{clickToHide:!1,autoHide:!1,className:"base",style:"notification"}),$(document).ready(function(){$("body").on("click",".close-notification",function(e){$(this).trigger("notify-hide")})})),chrome.storage.sync.set({hideNotification:!0})});var activated_fields=[];$("#title_feature_div").after('<div class="dropdown upload-dropdown ng-scope"> <a id="copy-helper"><img src="'+chrome.extension.getURL("images/copy_button.png")+'"></a></div>'),$(window).on("load",function(){chrome.storage.sync.get("first_time",function(e){e&&!e.first_time&&(chrome.storage.sync.set({first_time:"setted"},function(){}),setTimeout(function(){introJs().addSteps([{element:document.querySelectorAll("#copy-helper")[0],intro:"When you're ready to copy Amazon details onto your spreadsheet, click <b style='font-size: 15px;'>the button</b> to copy, and then click paste onto your spreadsheet.",position:"right"}]).start()},500))})}),$("#copy-helper").click(function(e){e.preventDefault(),chrome.storage.sync.get("serve_type",function(e){if(e&&e.serve_type)switch(e.serve_type){case"normal":return console.log("Serve for normal!!!"),void serveWithoutGGScript();case"script":return console.log("Serve with google sheets script!!!"),void serveWithGGScript()}else console.log("FF: Serve for normal way!!!"),serveWithoutGGScript()})});var normal_style="font-family: Arial; font-size: 13px;";
//# sourceMappingURL=amazon.js.map
